<!DOCTYPE html>
<html lang="tr-TR">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../fonts.css"/>
    <link rel="stylesheet" href="../base.css"/>
    <link rel="stylesheet" href="../light.css"/>
    <link rel="stylesheet" href="../dark.css"/>
    <link rel="stylesheet" id="theme-stylesheet" href="../style.css"/>
    <link rel="shortcut icon" href="../favicon.ico" type="../image/png" />
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
    <script src='../gokturk.js'></script>

    <meta name="description" content="Göktürkçe çeviri ve Klavye ile Göktürk Alfabesi yazılabilir, bu alfabe 4 ünlü, 25 ünsüz ve 9 çift sesli toplam 38 harfden oluşur.">
    <title>Göktürkçe Çeviri</title>

  </head>
    <body><button id="theme-toggle">AK</button>

<div class="header">
<div><a href="../"><img class="logo" alt="Türk Bitig" src="../logo.png" /></a><a class="turkbitig" href="../">Türk Bitig</a></div>
</div>

<div class="sitenav">

<div class="tabs">
  <a href="../" class="current">BAŞ</a>
  <a href="../menu.html">MENÜ</a>
</div>

<div class="nav">
  <a class="this">Göktürkçe Çeviri</a>
  <a href="../alfabe.html">Alfabe</a>
</div>

</div>

<div class="content">

<h3>Göktürkçe Çeviri Yazıcı</h3>
<div> <!-- div yazici baslar-->
<form method="POST" autocomplete="off" spellcheck="false">
<table>
 <tr><td colspan="2"><input maxlength="80" type="text" placeholder="Buna yaz: Türük &gt; Türk" id="ltn"></td></tr>
 <tr><td nowrap><button onclick="copyToClipboard(event)">Yazıyı kopyala</button>&nbsp;</td><td align="right" width="96%"><input type="text" class="uu" id="orhn"></td></tr> 
 <tr><td colspan="2"><canvas width="800" id="canvas"></canvas></td></tr>
</table>
</form>

<textarea maxlength="80" hidden id="gtext"></textarea>
</div><!-- div yazici biter-->

<table border="0" class="fonttable">
<tr>
  <td><label class="rs"><input type="radio" name="fontRadio" value="tbldamga" checked>1</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="tbg">2</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="kultigin">3</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="damgab">4</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="damgab2">5</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="tonyukuk2">6</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="cizgi">7</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="gokturkkurgu">8</label></td>
  <td><label class="rs"><input type="radio" name="fontRadio" value="irkbitig">9</label></td>
  <td align="right" style="white-space:nowrap;"><button id="plus">+</button>&nbsp;<button id="minus">-</button></td>
</tr>

<tr>
  <td><label class="rs rby"><input type="radio" name="colorRadio" value="#FFF">B</label></td>
  <td><label class="rs rsi"><input type="radio" name="colorRadio" value="#000">S</label></td>
  <td><label class="rs rk"><input type="radio" name="colorRadio" value="#C00" checked>K</label></td>
  <td><label class="rs rsa"><input type="radio" name="colorRadio" value="#FD0">S</label></td>
  <td><label class="rs rl"><input type="radio" name="colorRadio" value="#14A">L</label></td>
  <td><label class="rs rb"><input type="radio" name="colorRadio" value="#A25">B</label></td>
  <td><label class="rs rg"><input type="radio" name="colorRadio" value="#1BE">G</label></td>
  <td><label class="rs ry"><input type="radio" name="colorRadio" value="#096">Y</label></td>
  <td><label class="rs bp" ><input type="radio" name="colorRadio" value="#808">M</label></td>
  <td rowspan="2" align="right" style="vertical-align:middle;"><button style="padding:3px;" onclick="downloadImage()">indir<br>paylaş</button></td>
</tr>

<tr>
  <td><label class="rs bby"><input type="radio" name="bgColorRadio" value="#FFF" checked>&#9724;</label></td>
  <td><label class="rs bsi"><input type="radio" name="bgColorRadio" value="#000">&#9724;</label></td>
  <td><label class="rs bk"><input type="radio" name="bgColorRadio" value="#C00">&#9724;</label></td>
  <td><label class="rs bsa"><input type="radio" name="bgColorRadio" value="#FD0">&#9724;</label></td>
  <td><label class="rs bl"><input type="radio" name="bgColorRadio" value="#14A">&#9724;</label></td>
  <td><label class="rs bb" ><input type="radio" name="bgColorRadio" value="#A25">&#9724;</label></td>
  <td><label class="rs bg"><input type="radio" name="bgColorRadio" value="#1BE">&#9724;</label></td>
  <td><label class="rs by" ><input type="radio" name="bgColorRadio" value="#096">&#9724;</label></td>
  <td><label class="rs bp" ><input type="radio" name="bgColorRadio" value="#808">&#9724;</label></td>
</tr>
</table>

<div id="keydiv">
<table border="0" id="keyboard" class="keytable">
<tr>

<td><button class="key ae" data-value="𐰀">𐰀</button></td>
<td><button class="key ii" data-value="𐰃">𐰃</button></td>

<td rowspan="7">&nbsp;</td>

<td><button class="key kalin" data-value="𐰆">𐰆</button></td>
<td><button class="key ince" data-value="𐰇">𐰇</button></td>

<td rowspan="7">&nbsp;</td>

<td><button class="key normal" data-value="𐰲">𐰲</button></td>
<td><button class="key sil" data-value="x">X</button></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰉">𐰉</button></td>
<td><button class="key ince" data-value="𐰋">𐰋</button></td>

<td><button class="key kalin" data-value="𐰺">𐰺</button></td>
<td><button class="key ince" data-value="𐰼">𐰼</button></td>

<td><button class="key normal" data-value="𐰢">𐰢</button></td>
<td><big><button class="delete key sil" data-value="-">&gt;</button></big></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰑">𐰑</button></td>
<td><button class="key ince" data-value="𐰓">𐰓</button></td>

<td><button class="key kalin" data-value="𐰽">𐰽</button></td>
<td><button class="key ince" data-value="𐰾">𐰾</button></td>

<td><button class="key normal" data-value="𐰯">𐰯</button></td>

<td><button class="key normal" data-value="&nbsp; "> &nbsp; </button></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰍">𐰍</button></td>
<td><button class="key ince" data-value="𐰏">𐰏</button></td>

<td><button class="key kalin" data-value="𐱃">𐱃</button></td>
<td><button class="key ince" data-value="𐱅">𐱅</button></td>

<td><button class="key normal" data-value="𐱁">𐱁</button></td>
<td><button class="key normal" data-value=": ">: </button></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰴">𐰴</button></td>
<td><button class="key ince" data-value="𐰚">𐰚</button></td>

<td><button class="key kalin" data-value="𐰖">𐰖</button></td>
<td><button class="key ince" data-value="𐰘">𐰘</button></td>

<td><button class="key normal" data-value="𐰔">𐰔</button></td>
<td><button class="key normal" data-value="𐰪">𐰪</button></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰞">𐰞</button></td>
<td><button class="key ince" data-value="𐰠">𐰠</button></td>

<td><button class="key kalin" data-value="𐰶">𐰶</button></td>
<td><button class="key ince" data-value="𐰱">𐰱</button></td>

<td><button class="key normal" data-value="𐰨">𐰨</button></td>

<td><button class="key normal" data-value="𐰦">𐰦</button></td>

</tr>
<tr>

<td><button class="key kalin" data-value="𐰣">𐰣</button></td>
<td><button class="key ince" data-value="𐰤">𐰤</button></td>

<td><button class="key kalin" data-value="𐰸">𐰸</button></td>
<td><button class="key ince" data-value="𐰜">𐰜</button></td>

<td><button class="key normal" data-value="𐰭">𐰭</button></td>
<td><button class="key normal" data-value="𐰡">𐰡</button></td>

</tr>
</table>
</div>

<hr>

<button id="toggleButton">KLAVYEYİ AÇ</button>

<ul>
  <li>Klavyenizden <small>&#9664; &nbsp;&#9654;</small> tuşları ile font boyu ayarlanır.</li>
  <li><a href="../alfabe.html">Göktürk alfabesi kuralları ...</a> <span style="font-family:'damgab';">&nbsp;</span><span style="font-family:'damgab2';">&nbsp;</span><span style="font-family:'bitig';">&nbsp;</span><span style="font-family:'cizgi';">&nbsp;</span><span style="font-family:'tbg';">&nbsp;</span><span style="font-family:'tonyukuk2';">&nbsp;</span><span style="font-family:'gokturkkurgu';">&nbsp;</span><span style="font-family:'kultigin';">&nbsp;</span><span style="font-family:'irkbitig';">&nbsp;</span></li>
</ul>

<script>
    const toggleButton = document.getElementById('toggleButton');
    const keyDiv = document.getElementById('keydiv');

    toggleButton.addEventListener('click', () => {
      if (keyDiv.style.display === 'none') {
        keyDiv.style.display = 'block';
        toggleButton.textContent = 'KLAVYEYİ KAPA';
      } else {
        keyDiv.style.display = 'none';
        toggleButton.textContent = 'KLAVYEYİ AÇ';
      }
    });

    // Hide the keydiv by default
    keyDiv.style.display = 'none';
    toggleButton.textContent = 'KLAVYEYİ AÇ';
</script>

<script>

var gtext = document.getElementById("gtext");
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var fontSize = 100;
var lineHeight = 0.96;
var paddingTop = 10;
var paddingRight = 10;
//var canvasColor = "white"; // initialize canvas background color to white
var debounceTimer;

var minusButton = document.getElementById("minus");
var plusButton = document.getElementById("plus");
var colorRadios = document.querySelectorAll('input[name="colorRadio"]');
var fontRadios = document.querySelectorAll('input[name="fontRadio"]');
var ltn = document.getElementById("ltn");
var bgColorRadios = document.querySelectorAll('input[name="bgColorRadio"]');

function getParameterFromURL(paramName) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(paramName);
}

// Get the value from the URL and set it as the value of the gtext element
var urlValue = getParameterFromURL("orhn");
if (urlValue) {
  orhn.value = urlValue;
  gtext.value = urlValue;
}

// Update the canvas after setting the value from URL
updateCanvas();

// ... rest of the script

ltn.addEventListener("input", () => {
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => {
    updateCanvas();
  }, 20);
});

// Add additional event listener to gtext element that triggers updateCanvas function
ltn.addEventListener("change", () => {
  updateCanvas();
});

minusButton.addEventListener("click", () => {
    if (fontSize > 20) { // Check if font size is greater than 20
      fontSize -= 10;
      updateCanvas();
    }
  });

plusButton.addEventListener("click", () => {
    if (fontSize < 800) {
        fontSize += 10;
        updateCanvas();
    }
});

// Handle color radio button changes
for (var i = 0; i < colorRadios.length; i++) {
    colorRadios[i].addEventListener('change', () => {
        updateCanvas();
    });
}

// Handle font radio button changes
for (var i = 0; i < fontRadios.length; i++) {
    fontRadios[i].addEventListener('change', () => {
        updateCanvas();
    });
}

// Handle background color radio button changes
for (var i = 0; i < bgColorRadios.length; i++) {
    bgColorRadios[i].addEventListener('change', (event) => {
        canvasColor = event.target.value;
        updateCanvas();
    });
}

// Add event listener for arrow key presses
document.addEventListener("keydown", (event) => {
  if (event.key === "ArrowLeft") { // Increase font size if up arrow key pressed
    if (fontSize < 2000) {
      fontSize += 10;
      updateCanvas();
    }
  } else if (event.key === "ArrowRight") { // Decrease font size if down arrow key pressed
    if (fontSize > 20) {
      fontSize -= 10;
      updateCanvas();
    }
  }
});

function updateCanvas(force = false) {
  // Clear canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Get input text from hidden textarea
  var inputText = gtext.value;

  // Split input text into separate lines
  var maxWidth = canvas.width - paddingRight;
  var lines = [];
  var words = inputText.split(" ");
  var currentLine = words[0];
  for (var i = 1; i < words.length; i++) {
    var testLine = currentLine + " " + words[i];
    var metrics = ctx.measureText(testLine);
    var testWidth = metrics.width;
    if (testWidth > maxWidth) {
      lines.push(currentLine);
      currentLine = words[i];
    } else {
      currentLine = testLine;
    }
  }
  lines.push(currentLine);

  // Calculate canvas height based on number of lines
  var textHeight = lines.length * fontSize * lineHeight;
  var canvasHeight = textHeight + paddingTop * 2;
  canvas.height = canvasHeight;

  // Set text color based on radio button selection
  var selectedColor = document.querySelector(
    'input[name="colorRadio"]:checked'
  ).value;
  ctx.fillStyle = selectedColor;

  // Set font family based on radio button selection
  var selectedFont = document.querySelector(
    'input[name="fontRadio"]:checked'
  ).value;
  if (selectedFont === "damgab") {
    ctx.font = fontSize + "px damgab";
  } else if (selectedFont === "damgab2") {
    ctx.font = fontSize + "px damgab2";
  } else if (selectedFont === "tbg") {
    ctx.font = fontSize + "px tbg";
  } else if (selectedFont === "cizgi") {
    ctx.font = fontSize + "px cizgi";
  } else if (selectedFont === "tbg") {
    ctx.font = fontSize + "px tbg";
  } else if (selectedFont === "tonyukuk2") {
    ctx.font = fontSize + "px tonyukuk2";
  } else if (selectedFont === "irkbitig") {
    ctx.font = fontSize + "px irkbitig";
  } else if (selectedFont === "gokturkkurgu") {
    ctx.font = fontSize + "px gokturkkurgu";
  } else if (selectedFont === "kultigin") {
    ctx.font = fontSize + "px kultigin";
  } else if (selectedFont === "tbldamga") {
    ctx.font = fontSize + "px tbldamga";
  }

  ctx.textAlign = "right";
  ctx.textBaseline = "top";
  ctx.direction = "rtl";

  var x = canvas.width - paddingRight;
  var y = paddingTop;
  for (var i = 0; i < lines.length; i++) {
    if (y + fontSize * lineHeight > canvasHeight - paddingTop) {
      break;
    }
    ctx.fillText(lines[i], x, y);
    y += fontSize * lineHeight;
  }

  // Set canvas background color based on radio button selection
  canvas.style.backgroundColor = "";
  var selectedBgColor = document.querySelector(
    'input[name="bgColorRadio"]:checked'
  );
  if (selectedBgColor) {
    canvasColor = selectedBgColor.value;
  }
  canvas.style.backgroundColor = canvasColor;

  // Force the canvas to update if necessary
  if (force) {
    canvas.dispatchEvent(new Event("input"));
  }
}

function downloadImage() {
    updateCanvas();

    // Create a new canvas with selected background color
    var newCanvas = document.createElement('canvas');
    newCanvas.width = canvas.width;
    newCanvas.height = canvas.height;
    var newCtx = newCanvas.getContext('2d');
    newCtx.fillStyle = canvasColor;
    newCtx.fillRect(0, 0, newCanvas.width, newCanvas.height);

    // Draw original canvas on the new canvas
    newCtx.drawImage(canvas, 0, 0);

    // Download the new canvas as an image
    var link = document.createElement('a');
    link.download = 'gokturkce.png';
    link.href = newCanvas.toDataURL();
    link.click();
}

// Initialize canvas on page load
updateCanvas();

var keyboardContainer = document.getElementById("keyboard");
var gtext = document.getElementById("orhn");

keyboardContainer.addEventListener("click", function(event) {
  var clickedElement = event.target;
  if (clickedElement.classList.contains("key")) {
    var keyType = clickedElement.getAttribute("data-value");
    switch (keyType) {
      case "-":
        gtext.value = gtext.value.slice(0, -2);
        break;
      case "x":
        gtext.value = gtext.value.slice(0, -2000);
        break;
      default:
        gtext.value += keyType;
        break;
    }
    updateCanvas();
  }
});

      function copyToClipboard(event) {
        event.preventDefault();
        var input = document.getElementById("orhn");
        input.select();
        input.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand("copy");
        console.log("Copied to clipboard: " + input.value);
      }

</script>

 </div>
<div class="footer">
<a href="../icerik.html">içerik</a> | <a href="../iletisim.html">iletişim</a>
</div>
  <script src="../theme.js"></script>
</body>
</html>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XB6M7JR5GW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XB6M7JR5GW');
</script>
