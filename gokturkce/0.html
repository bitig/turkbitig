<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Text Editor</title>
    <style>
        :root {
            --bg-dark: #1a1a1a;
            --bg-darker: #121212;
            --text-light: #f0f0f0;
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff6b6b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--primary);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--secondary);
            text-shadow: 0 0 10px rgba(74, 111, 165, 0.5);
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        .editor-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .controls {
            flex: 1;
            min-width: 300px;
            background-color: var(--bg-darker);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        
        .canvas-container {
            flex: 2;
            min-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        h2 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--secondary);
            border-bottom: 1px solid var(--primary);
            padding-bottom: 8px;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }
        
        label {
            width: 120px;
            font-weight: 500;
        }
        
        input, select, textarea {
            flex: 1;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--primary);
            background-color: var(--bg-dark);
            color: var(--text-light);
        }
        
        input[type="color"] {
            height: 40px;
            cursor: pointer;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .btn-download {
            background-color: var(--accent);
        }
        
        .btn-download:hover {
            background-color: #ff5252;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }
        
        canvas {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            max-width: 100%;
            margin: 0 auto;
            display: block;
        }
        
        .canvas-wrapper {
            background-color: var(--bg-darker);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        
        .instructions {
            background-color: var(--bg-darker);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .instructions h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        @media (max-width: 768px) {
            .editor-container {
                flex-direction: column;
            }
            
            .control-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            label {
                width: 100%;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Canvas Text Editor</h1>
            <p class="subtitle">Create beautiful text on canvas with live preview</p>
        </header>
        
        <div class="editor-container">
            <div class="controls">
                <h2>Text Settings</h2>
                
                <div class="control-group">
                    <div class="control-row">
                        <label for="textInput">Text Content:</label>
                        <textarea id="textInput" placeholder="Enter your text here...">Hello World! This is a sample text to demonstrate the canvas text editor. You can edit this text and see live updates on the canvas.</textarea>
                    </div>
                </div>
                
                <div class="control-group">
                    <h2>Styling Options</h2>
                    
                    <div class="control-row">
                        <label for="textColor">Text Color:</label>
                        <input type="color" id="textColor" value="#000000">
                    </div>
                    
                    <div class="control-row">
                        <label for="bgColor">Background Color:</label>
                        <input type="color" id="bgColor" value="#ffffff">
                    </div>
                    
                    <div class="control-row">
                        <label for="fontSize">Font Size:</label>
                        <input type="range" id="fontSize" min="8" max="72" value="24">
                        <span id="fontSizeValue">24px</span>
                    </div>
                    
                    <div class="control-row">
                        <label for="fontFamily">Font Family:</label>
                        <select id="fontFamily">
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                            <option value="'Courier New', monospace">Courier New</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="Verdana, sans-serif">Verdana</option>
                            <option value="Impact, sans-serif">Impact</option>
                            <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-group">
                    <h2>Text Border</h2>
                    
                    <div class="control-row">
                        <label for="strokeWidth">Stroke Width:</label>
                        <input type="range" id="strokeWidth" min="0" max="10" value="0">
                        <span id="strokeWidthValue">0px</span>
                    </div>
                    
                    <div class="control-row">
                        <label for="strokeColor">Stroke Color:</label>
                        <input type="color" id="strokeColor" value="#000000">
                    </div>
                </div>
                
                <button id="downloadBtn" class="btn btn-download">Download Text Canvas</button>
            </div>
            
            <div class="canvas-container">
                <div class="canvas-wrapper">
                    <canvas id="textCanvas"></canvas>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>How to Use:</h3>
            <ul>
                <li>Edit text in the input area to see live updates on canvas</li>
                <li>Change colors using the color pickers</li>
                <li>Adjust font size with the slider</li>
                <li>Select different fonts from the dropdown menu</li>
                <li>Add stroke (border) around text using the stroke controls</li>
                <li>Click "Download Text Canvas" to save only the area with text</li>
                <li>Canvas automatically resizes to fit all text content</li>
            </ul>
        </div>
    </div>

    <script>
        // Get DOM elements
        const canvas = document.getElementById('textCanvas');
        const ctx = canvas.getContext('2d');
        const textInput = document.getElementById('textInput');
        const textColor = document.getElementById('textColor');
        const bgColor = document.getElementById('bgColor');
        const fontSize = document.getElementById('fontSize');
        const fontSizeValue = document.getElementById('fontSizeValue');
        const fontFamily = document.getElementById('fontFamily');
        const strokeWidth = document.getElementById('strokeWidth');
        const strokeWidthValue = document.getElementById('strokeWidthValue');
        const strokeColor = document.getElementById('strokeColor');
        const downloadBtn = document.getElementById('downloadBtn');

        // Update font size display
        fontSize.addEventListener('input', () => {
            fontSizeValue.textContent = `${fontSize.value}px`;
            redrawCanvas();
        });

        // Update stroke width display
        strokeWidth.addEventListener('input', () => {
            strokeWidthValue.textContent = `${strokeWidth.value}px`;
            redrawCanvas();
        });

        // Add event listeners for live updates
        textInput.addEventListener('input', redrawCanvas);
        textColor.addEventListener('input', redrawCanvas);
        bgColor.addEventListener('input', redrawCanvas);
        fontSize.addEventListener('input', redrawCanvas);
        fontFamily.addEventListener('change', redrawCanvas);
        strokeWidth.addEventListener('input', redrawCanvas);
        strokeColor.addEventListener('input', redrawCanvas);

        // Download button
        downloadBtn.addEventListener('click', downloadCanvas);

        // Initial draw
        redrawCanvas();

        function redrawCanvas() {
            const text = textInput.value;
            const textColorValue = textColor.value;
            const bgColorValue = bgColor.value;
            const fontSizeValue = parseInt(fontSize.value);
            const fontFamilyValue = fontFamily.value;
            const strokeWidthValue = parseInt(strokeWidth.value);
            const strokeColorValue = strokeColor.value;

            // Set canvas dimensions
            const padding = 20;
            
            // Measure text to determine canvas size
            ctx.font = `${fontSizeValue}px ${fontFamilyValue}`;
            const lines = wrapText(text, ctx, canvas.width - padding * 2);
            
            // Calculate height needed for all text
            const lineHeight = fontSizeValue * 1.4;
            const totalHeight = lines.length * lineHeight + padding * 2;
            
            // Set canvas dimensions to fit text
            canvas.width = Math.max(300, Math.min(800, ctx.measureText(text).width + padding * 2));
            canvas.height = Math.max(totalHeight, 100);
            
            // Clear canvas with background color
            ctx.fillStyle = bgColorValue;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Set text properties
            ctx.font = `${fontSizeValue}px ${fontFamilyValue}`;
            ctx.fillStyle = textColorValue;
            ctx.textAlign = 'left';
            ctx.textBaseline = 'top';
            
            // Draw text with stroke if needed
            const yStart = padding;
            lines.forEach((line, index) => {
                const x = padding;
                const y = yStart + (index * lineHeight);
                
                if (strokeWidthValue > 0) {
                    ctx.strokeStyle = strokeColorValue;
                    ctx.lineWidth = strokeWidthValue;
                    ctx.strokeText(line, x, y);
                }
                
                ctx.fillText(line, x, y);
            });
        }

        function wrapText(text, context, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                const word = words[i];
                const width = context.measureText(currentLine + ' ' + word).width;
                if (width < maxWidth) {
                    currentLine += ' ' + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);
            return lines;
        }

        function downloadCanvas() {
            const link = document.createElement('a');
            link.download = 'canvas-text.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
    </script>
</body>
</html>
