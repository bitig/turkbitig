function toggleKeyDiv() {
    var keyDiv = document.getElementById('keydiv');
    var toggleButton = document.getElementById('toggleButton');
    
    if (keyDiv.style.display === 'none' || keyDiv.style.display === '') {
        keyDiv.style.display = 'block';
        toggleButton.textContent = 'Klavyeyi kapat';
        setLocalStorage('keyDivVisible', 'true');
    } else {
        keyDiv.style.display = 'none';
        toggleButton.textContent = 'Göktürkçe klavye';
        setLocalStorage('keyDivVisible', 'false');
    }
}

function setLocalStorage(key, value) {
    var now = new Date();
    var item = {
        value: value,
        expiry: now.getTime() + 900000 // Current time + 15 minutes in milliseconds
    };
    localStorage.setItem(key, JSON.stringify(item));
}

function getLocalStorage(key) {
    var itemStr = localStorage.getItem(key);
    if (!itemStr) {
        return null;
    }
    var item = JSON.parse(itemStr);
    var now = new Date();
    if (now.getTime() > item.expiry) {
        localStorage.removeItem(key);
        return null;
    }
    return item.value;
}

















function toggleKeyDiv() {
    var keyDiv = document.getElementById('keydiv');
    var toggleButton = document.getElementById('toggleButton');
    
    if (keyDiv.style.display === 'none' || keyDiv.style.display === '') {
        keyDiv.style.display = 'block';
        toggleButton.textContent = 'Klavyeyi kapat';
        setLocalStorage('keyDivVisible', 'true');
    } else {
        keyDiv.style.display = 'none';
        toggleButton.textContent = 'Göktürkçe klavye';
        setLocalStorage('keyDivVisible', 'false');
    }
}

function setLocalStorage(key, value) {
    var now = new Date();
    var item = {
        value: value,
        expiry: now.getTime() + 900000 // Current time + 15 minutes in milliseconds
    };
    localStorage.setItem(key, JSON.stringify(item));
}

function getLocalStorage(key) {
    var itemStr = localStorage.getItem(key);
    if (!itemStr) {
        return null;
    }
    var item = JSON.parse(itemStr);
    var now = new Date();
    if (now.getTime() > item.expiry) {
        localStorage.removeItem(key);
        return null;
    }
    return item.value;
}



// Initialize the state based on local storage or default to hidden
window.onload = function() {
    var keyDiv = document.getElementById('keydiv');
    var toggleButton = document.getElementById('toggleButton');
    var isVisible = getLocalStorage('keyDivVisible');

    if (isVisible === 'true') {
        keyDiv.style.display = 'block';
        toggleButton.textContent = 'Klavyeyi kapat';
    } else {
        keyDiv.style.display = 'none';
        toggleButton.textContent = 'Göktürkçe klavye';
    }
};
